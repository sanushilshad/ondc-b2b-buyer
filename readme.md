## CUSTOM MIGRATION COMMAND:

```
cargo run --bin ondc-retail-b2b-buyer -- migrate
```
## SQLX OFFLINE MODE:

```
cargo sqlx prepare
```

## ENVIRON VARIABLE 
- Set the following environ variables in files called `env.sh` and `configuration.yaml`.
- The value in `env.sh` are:
```

## DATABASE VARIABLES
export DATABASE__PASSWORD=""
export DATABASE__PORT=00
export DATABASE__HOST=""
export DATABASE__NAME=""
export DATABASE__USERNAME="postgres"
export DATABASE__DATABASE_URL="postgres://postgres:{password}@{host}:{port}/{db_name}"

## EMAIL VARIABLES
export EMAIL_CLIENT__USERNAME=""
export EMAIL_CLIENT__PASSWORD=""
export EMAIL_CLIENT__BASE_URL=""
export EMAIL_CLIENT__SENDER_EMAIL=""
export EMAIL_CLIENT__TIMEOUT_MILLISECONDS=10000


## TARACING VARIABLES
export OTEL_SERVICE_NAME="ondc-retail-b2b-buyer"
export OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="http://localhost:4317"
# export OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4318/v1/traces"
# export OTEL_INSTRUMENTATION_HTTP_CAPTURE_HEADERS_SERVER_REQUEST="X-Request-*"

## LOG VARIABLES
export TEST_LOG=True

## SECRET VALUES
export SECRET__JWT__SECRET=""

## REDIS VARIABLE
export REDIS__HOST=""
export REDIS__PORT=""
export REDIS_PASSWORD=""


## BUYER NP DETAILS
export ONDC__BAP__ID=""
export ONDC__BAP__URI=""
export ONDC__BAP__SIGNING_KEY=""

##USER VARIABLE
export LIST__USER__ADMIN_LIST="9562279968,"

## ONDC GATEWAY VARIABLE
export ONDC__GATEWAY_URI="https://preprod.gateway.ondc.org"
export ONDC__REGISTRY_BASE_URL="https://preprod.registry.ondc.org/ondc"

## PRODUCT MEILEI
export PRODUCT__MEILEI__API_MASTER_KEY=""
export PRODUCT__MEIELI__URL=""

## APPLICATION DATA
export APPLICATION__NAME="ondc-retail-b2b-buyer"


```

- The value in `configuration.yaml` are:

```
application:
  port: 8002
  host: 0.0.0.0

```

- In order to verify SQL queries at compile time, set the below config in `.env` file:
```
export DATABASE_URL="postgres://postgres:{password}@{host}:{port}/{db_name}"

```

## TO RUN THE SERVER:
- For running development server:
```
bash dev_run.sh
```
- For running production server:
```
bash release.sh
```


## MILESTONE 1:
* [x] SET UP THE BASIC ACTIX SERVER
* [x] ADD AUTOMATIC CONFIGURATION FETCH
* [x] ADD ERROR HANDLING
* [x] DEVELOP CUSTOM MIGRATION COMMAND
* [x] ADD TRACING WITH JAEGER INTEGRATION
* [x] DEVELOP `SAVE REQ/RESPONSE PAYLOAD IN TRACING` MIDDLEWARE
* [x] EMAIL SERVICE INTEGRATION
* [x] DEVELOP USER REGISTRATION API
* [x] DEVELOP BUSINESS REGISTRATION API
* [x] DEVEOP USER AUTHENTICATION VIA PASSWORD
* [x] SETTING THE CODEBASE STRUCTURE SIMILAR TO DJANGO
* [x] DEVELOP JWT CREATION API AND VERIFICATION MIDDLEWARE
* [x] INTEGRATE OPENAPI SWAGGER
* [x] INTEGRATE REDIS
* [x] INTEGRATE WEBSOCKET 
* [x] ADD BUSINESS VERIFICATION MIDDLEWARE
* [x] ADD TSP CHANGES INTO USER ACCOUNT AND BUSINESS ACCOUNT
* [x] ADD GENERIC HEADER VALIDATION MIDDLEWARE
* [x] ADD REALTIME SEARCH API
* [x] ADD SELLER AUTH HEADER VALIDATION MIDDLEWARE
* [x] ADD ONDC ON SEARCH API
* [x] FIX INTEGRATION TEST + ADD UNIT TEST CASES FOR THE APIs IN MILESTONE 1
* [x] ADD APPLICATION RELEASE + DEBUG + KILL BASH SCRIPTS 



## MILESTONE 2:
* [ ] DEVELOP SELECT API
* [ ] DEVELOP ONDC ON SELECT API
* [ ] DEVELOP INIT API
* [ ] DEVELOP ONDC ON INIT API
* [ ] DEVELOP CONFIRM API
* [ ] DEVELOP ONDC ON ON_CONFIRM API
* [ ] DEVELOP  STATUS API
* [ ] DEVELOP ONDC ON STATUS API
* [ ] INTEGRATE PERMISSION FLOW

## MILESTONE 3:
* [ ] INTEGRATE PERMISSION FLOW
* [ ] DEVELOP PERMISSION FLOW

## MILESTONE 4:
* [ ] COMPLETE VALIDATION FOR BUSINESS_ACCOUNT REGISTRATION
* [ ] COMPLETE VALIDATION FOR USER_ACCOUNT REGISTRATION
* [ ] COMPLETE VALIDATION FOR PRODUCT SEARCH REGISTRATION
* [ ] COMPLETE VALIDATION ONDC ON SEARCH REGISTRATION

## OPTIONAL

* [ ] INTEGRATE SMS
* [ ] INTEGRATE WHATSAPP
* [ ] DEVELOP EMAIL VERFICATION APIS FOR USER AND BUSINESS ACCOUNT
* [ ] DEVELOP MOBILE VERFICATION APIS FOR USER AND BUSINESS ACCOUNT
* [ ] DEVELOP SMS OTP API
* [ ] DEVELOP EMAIL OTP API
* [ ] THINK OF MODE OF PRODUCT CACHING
* [ ] DEVELOP NEW CONFIG FETCH (will be given the last priority)
* [ ] INTERGRATE ETCD FOR TSP FLOW (WHEN I HAVE NOTHING BETTER TO DO: PROBABLY NEVER)
### THE MILESTONES ARE SUSCEPTIBLE TO CHANGES ╰(*°▽°*)╯